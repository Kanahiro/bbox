[webserver]
# Web server settings
# Environment variable prefix: BBOX_WEBSERVER__
# server_addr = "127.0.0.1:8080"  # Default: 127.0.0.1:8080
# worker_threads = 4  # Default: number of CPU cores

[[fileserver.static]] 
# Static file serving
# Env var example: BBOX_FILESERVER__STATIC='[{dir="data",path="data"}]'
# ./data/* -> http://localhost:8080/data/
dir = "./data"
path = "data"

[[fileserver.static]] 
dir = "./bbox-routing-server/viewer"
path = "rviewer"

[[fileserver.repo]]
# QGIS plugin repository
# Env var example: BBOX_FILESERVER__REPO='[{dir="plugins",path="qgis"}]'
# ./plugins/*.zip -> http://localhost:8080/qgis/plugins.xml
dir = "./plugins"
path = "qgis"

[wmsserver]
# WMS server settings
# Environment variable prefix: BBOX_WMSSERVER__
path = "/wms"                # Base path of WMS endpoints
# num_fcgi_processes = 4     # Default: number of CPU cores
# wait_timeout = 30000       # FCGI wait timeout in ms. Default: 90s
# search_projects = false    # Scan directories and build inventory. Default: true

[wmsserver.qgis_backend]
# QGIS Server settings
# Environment variable prefix: BBOX_WMSSERVER__QGIS_BACKEND__
# project_basedir = "."      # Base dir for project files (.qgs, .qgz)

[wmsserver.umn_backend]
# UMN MapServer settings
# Environment variable prefix: BBOX_WMSSERVER__UMN_BACKEND__
# project_basedir = "."      # Base dir for project files (.map)

#[wmsserver.mock_backend]
# Enable FCGI mockup backend (for testing)
# Environment variable prefix: BBOX_WMSSERVER__MOCK_BACKEND__

[processes.dagster_backend]
# Dagster backend settings
# Environment variable prefix: BBOX_PROCESSES__DAGSTER_BACKEND__
graphql_url = "http://localhost:3000/graphql"
repository_name = "fpds2_processing_repository"
repository_location_name = "fpds2_processing.repos"

[[routing.service]]
profile = "railway"
gpkg = "../data/railway-test.gpkg"
table = "flows"
geom = "geom"

[grid.user]
width = 256
height = 256
extent = { minx = 2420000.0, miny = 1030000.0, maxx = 2920000.0, maxy = 1350000.0 }
srid = 2056
units = "m"
resolutions = [4000,3750,3500,3250,3000,2750,2500,2250,2000,1750,1500,1250,1000,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,0.5,0.25,0.125,0.1,0.0625]
origin = "TopLeft"

[tile.wms]
#baseurl = "http://localhost/cgi-bin/qgis_mapserv.fcgi?MAP=/opt/qgis_server_data/ch_051_1_version1_7_mn95.qgz&version=1.1.1&transparent=True&srs=EPSG:2056&styles="
#layers = "ch.ti.051_1.piano_registro_fondiario_colori"
#format = "image/png"
baseurl = "http://localhost:8080/wms/qgs/ne?version=1.3.0"
layers = "country"
format = "image/png; mode=8bit"

[metrics.prometheus]
# Prometheus metrics endpoint
# Environment variable prefix: BBOX_METRICS__PROMETHEUS__
path = "/metrics"

[metrics.jaeger] 
# Jaeger tracing
# Environment variable prefix: BBOX_METRICS__JAEGER__
agent_endpoint = "localhost:6831"
